# HTTP 완벽 가이드

- ## 웹은 어떻게 동작하는가



# I. HTTP: 웹의 기초

# 01. HTTP 개관

- **HTTP; HyperTextTransferProtocol**
  - **WWW; World Wide Web**에서 통신하는 데 사용하는 프로토콜 프로그램
  - 웹 브라우저 - 웹 서버 사이의 쌍방향 통신에 사용하는 것이 가장 대표적
  - 현대 인터넷의 공용어



## 1.1 HTTP: 인터넷의 멀티미디어 배달부

- HTTP는 신뢰성 있는 데이터 전송 프로토콜
- 전송 중 파괴, 중복, 왜곡되는 것을 걱정할 필요 없음



## 1.2 웹 클라이언트와 서버

- 웹 서버
  - 웹 콘텐츠가 존재하는 장소
  - HTTP 프로토콜로 의사소통하기에 HTTP 서버라고 불림
- HTTP 클라이언트
  - 웹 브라우저
- 클라이언트는 서버에게 HTTP 요청을, 서비는 클라이언트에게 요청된 데이터를 HTTP 응답으로 돌려줌



## 1.3 리소스

- 웹 리소스
  - 정적 파일
  - 동적 컨텐츠 리소스
- 무엇이든 리소스가 될 수 있음
  - 매출 예상 스프레드 시트
  - 웹 게이트웨이
  - 인터넷 검색엔진 등...



### 1.3.1 미디어 타입

- **MIME; Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장**

  - HTTP가 웹에서 전송되는 객체 각각에 붙이는 데이터 포맷 라벨
  - 인터넷이 수천 가지 데이터 타입을 다루기 때문에 필요
  - 각기 다른 전자메일 시스템 간 메시지 전달 문제 해결을 위해 설계됨

- 예시

  ```
  Content-type: image/jpeg
  Content-length: 12984
  ```

  - 웹 브라우저는 서버로부터 받는 객체가 다룰 수 있는 타입인지 MIME 타입을 통해 확인함
    - 이미지 파일 보여주기, HTML 파일 분석, 포맷팅 하기, 오비오 파일을 스피커로 재생, 특수 포맷을 다루기 위해 외부 플러그인 소프트웨어 실행 등 ...

- 구성

  - `primary object type` / `specific subtype`
  - 주 타입 / 부 타입 형태
  - 예시
    - `text/html`: HTML 텍스트 문서
    - `text/plain`: plain ASCII 텍스트 문서
    - `image/jpeg`: JPEG 이미지
    - `image/gif`: GIF 이미지
    - `video/quicktime`: 애플 퀵타임 동영상
    - `application/vnd.ms-powerpoint`: 마이크로소프트 파워포인트 프레젠테이션



### 1.3.2 URI

- URI; Uniform Resource Identifier, 통합 자원 식별자
  - 웹 서버 리소스는 각기 이름을 가지고 있음
  - 정보 리소스를 고유하게 식별하고 위치를 지정할 수 있음
  - 예시
    - `http://www.joes-hardware.com/specials/saw-blade.gif`
- 종류
  - URL
  - URN



### 1.3.3 URL

- URL; Uniform Resource Locator, 통합 자원 지시자
  - 특정 서버의 한 리소스에 대한 구체적인 위치
- 포맷
  - 스킴(scheme)
    - 리소스에 접근하기 위해 사용하는 프로토콜
    - 일반적으로 HTTP 프로토콜(`http://`)
  - 서버의 인터넷 주소(`www.joes-hardware.com`)
  - 웹 서버의 리소스(`/specials/saw-blade.gif`)
- 대부분의 경우 URI는 URL임



### 1.3.4 URN

- URN; Uniform Resource Name, 유니폼 리소스 이름
  - 위치 독립적인 유일한 이름
  - 이름만 계속 동일하다면 다른 프로토콜로 접근해도 괜찮음
- 예시
  - `urn:ietf:rfc:2141`
- 아직은 실험적 단계
  - 리소스 위치 분석을 위한 인프라 지원이 아직 부재하기 때문



## 1.4 트랜잭션

- 요청 명령과 응답 결과로 구성



### 1.4.1 메서드

- 모든 HTTP 요청 메시지는 단 하나의 메서드를 가짐

- 메서드는 서버에게 어떤 동작이 취해져야 할 지 알림

- 종류

  | HTTP 메서드 | 설명                                                         |
  | ----------- | ------------------------------------------------------------ |
  | GET         | 서버에서 클라이언트로 지정한 리소스를 보내라                 |
  | PUT         | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라 |
  | DELETE      | 지정한 리소스를 서버에서 삭제하라                            |
  | POST        | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라  |
  | HEAD        | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라       |



### 1.4.2 상태 코드

- 모든 HTTP 응답 메시지는 상태 코드와 함께 반환됨
- 사유 구절(reason phrase)
  - HTTP는 각 상태 코드에 텍스트로 된 사유 구절을 함께 보냄
  - 설명만을 위한 것이며, 응답에 사용되지는 않음



### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다.

- 하나의 작업 수행을 위해 애플리케이션은 여러 HTTP 트랜잭션을 수행
- 예제: html 뼈대 + 각각의 리소스들
- 웹페이지는 보통 하나의 리소스가 아닌, 리소스의 모음임



## 1.5 메시지

- HTTP 메시지
  - 줄 단위의 문자열
  - 이진 형식이 아닌 일반 텍스트이기에 사람이 읽고 쓰기 쉬움
- 구조
  - 시작줄
  - 헤더
    - 각 헤더 필드는 `:`으로 구분되어 있는 이름-값으로 구성됨
    - 빈 줄로 끝남
  - 본문
    - 시작줄, 헤더와 달리 이진 데이터를 포함 가능



## 1.6 TCP 커넥션

- TCP; Transmisson Control Protocol, 전송 제어 프로토콜



### 1.6.1 TCP/IP

- HTTP는 애플리케이션 계층 프로토콜
  - 네트워크 통신의 핵심적인 세부사항은 신경 쓰지 않음
  - 대신 인터넷 전송 프로토콜인 TCP/IP 사용
- TCP가 제공하는 기능
  - 오류 없는 데이터 전송
  - 순서에 맞는 전달
  - 조각나지 않는 데이터 스트림(언제, 어떤 크기로든 보낼 수 있음)
