# 클린 아키텍처

[TOC]

## 들어가기 전에

### 추천사

- 소프트웨어는 프랙털 구조다. 더 작은 컴포넌트들의 구성으로 이루어진다.

- 건축물과 다르게 소프트웨어는 물리적 규모 및 한계가 덜하다.

  - 프로세서 속도, 네트워크 대역폭, 메모리 및 스토리지의 크기 정도의 제약만 있다.

- 좋은 아키텍처는 ***변경이 쉽다***.

  - 변경이 쉬우려면 앞으로 어떤 변화가 있을 지 예측해야 한다.

  - 과거(지금까지 아키텍처의 구성)을 이해하는 것은 어렵다.

    - 과거에 구성된 아키텍처에 매몰될 경우,
      이 **강력하고 안정된 아키텍처**가 변경 자체를 거부하게 된다.

  - 미래(어떤 변경이 있을지)를 예측하는 일은 명확하지 않다.

    - 앞으로의 변경 용이성에 지나치게 집착할 경우
      **추측성 일반화(speculative generality)**의 냄새를 풍기게 된다: 예산을 초과하는 부수적 복잡성(accidental complexity)으로 가득차게 된다.

  - 가장 **깔끔한(clean) 길**을 추구해야 한다.

    - 완전한 예측, 완벽한 구조가 불가능함을 인정하고, 불완전한 지식을 바탕으로 행동해 나간다.

    - ***아키텍처는 종착지가 아니라 여정에 가깝다.***

    - ***아키텍처는 고정된 산출물이 아니라 계속되는 탐구 과정에 가깝다.***

    - 이를 이해해야 더 좋은 아키텍처가 만들어진다.

      > 아키텍처는 구현과 측정을 통해 증명해야 하는 가설이다.
      >
      > - 톰 길브(Tom Gilb)



### 서문

- ***소프트웨어 아키텍처의 규칙은 보편적이다.***
  - 하드웨어가 아무리 변하더라도,
  - 어떤 다른 분야의 소프트웨어를 다룰 때라도, 동일한 규칙이 적용될 수 있다.
- ***소프트웨어를 구성하는 것들이 변하지 않았기 때문이다.***
  - 고급 언어가 등장하고, 객체지향 프로그래밍 등 여러 프로그래밍 패러다임이 발생하였지만
  - **코드는 여전히 순차(sequence), 분기(selection), 반복(iteration)의 집합체일 뿐**이다.
- 소프트웨어 아키텍처의 규칙은 프로그램의 구성요소를 정렬하고 조립하는 방법에 대한 규칙이다.
  - 구성요소가 변하지 않는다면, 그것을 정렬하는 규칙도 변하지 않는다.



## 01부 소개

- 프로그램을 동작하게 만드는 일은 어렵지 않다.
  하지만 프로그램을 제대로 만드는 일은 어렵다.
- 제대로 된 소프트웨어는 효율적이다: 유지보수가 쉽고 확장과 변경에 용이하다.



### 1장 설계와 아키텍처란?

- 설계(design)과 아키텍처(architecture)의 구분?

  - 사실 둘의 구분은 무의미하다.

    - 아키텍처는 저수준 세부사항이 아닌 고수준의 무언가를 지칭하는 데 쓰이는 반면
      설계는 저수준 구조, 결정사항 등을 의미하는 경우가 많다.

    - 하지만 저수준의 설계와 고수준의 아키텍처는 단절 없이 이어져 있고, 분리해서 생각하기 힘들다.

      > 고수준에서 저수준으로 향하는 의사결정의 연속성만이 있을 뿐이다.

- 소프트웨어 설계의 목표는 시스템 구축 및 유지보수에 최소의 인력을 투입할 수 있게끔 만드는 것이다.
- 소프트웨어의 규모가 커지면서 갈수록 그 효율성이 떨어지는 경우가 많다.
  - 코드를 그때그때 정리하지 않고 미루면, 이 기술적 부채가 누적되어 생산성은 0으로 수렴하게 된다.
  - 개발 조직에 있어 최선의 선택은 이러한 부채를 일으키지 않기 위해서
    소프트웨어의 아키텍처의 품질을 심각하게 고민하는 것이다.
  - 이를 위해서는 좋은 소프트웨어 아키텍처에 대한 이해가 선행되어야 한다.



## 2장 두 가지 가치에 대한 이야기

- 모든 소프트웨어 프로그램이 이해 당사자에게 제공하는 두 가지 가치: 행위(behavior), 구조(structure)



### 행위

- 기능 명세서나 요구사항 문서를 구체화할 수 있게 한다.
- 요구사항을 만족하도록 코드를 작성한다.
- 요구사항을 위배하면 디버깅한다.
- 많은 프로그래머들이 이 행위에 대한 고려만이 자신의 일이라고 생각하지만, 이는 잘못된 인식이다.



### 아키텍처

- 소프트웨어는 그 이름대로 부드러움(soft)을 지니도록 만들어졌다: 변경하기 쉬워야 한다.
- 변경사항을 반영하는데 드는 어려움은 
  **변경되는 범위(scope)에 비례하지만, 변경사항의 형태와는 무관해야 한다.**
- 아키텍처가 특정 형태를 선호할수록, 새로운 기능을 아키텍처에 맞추기 힘들어진다.
- 따라서 아키텍처는 형태에 독립적이어야 한다.



### 더 높은 가치

- 많은 사람들은 기능이 일단 작동하는 것이 우선시되어야 한다고 생각하지만,
  기능이 일단 작동만 하지만, 비용 문제로 인해서 거의 변경이 불가능한 상태의 소프트웨어가 나올 수도 있다.
- 변경에 용이한 소프트웨어는 지금 기능 작동이 잘 안 되더라도, 작동할 수 있게끔 쉽게 변경할 수 있다.
- 일단 동작하는 소프트웨어가 아니라, 변경하기 쉬운 소프트웨어를 추구해야 한다.



### 아이젠하워 메트릭스

- 긴급한 문제는 중요하지 않으며, 중요한 문제는 긴급하지 않다.
- 소프트웨어에 있어서는
  - 행위는 긴급하지만 중요도가 항상 높은 것은 아니다.
  - 아키텍처는 중요하지만 긴급한 경우는 드물다.
